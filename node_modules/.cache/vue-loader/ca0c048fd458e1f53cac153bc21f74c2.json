{"remainingRequest":"/home/warley/Projetos/Web/TCC/Front-End/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/warley/Projetos/Web/TCC/Front-End/src/components/users/Usuario.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/warley/Projetos/Web/TCC/Front-End/src/components/users/Usuario.vue","mtime":1648652533869},{"path":"/home/warley/Projetos/Web/TCC/Front-End/node_modules/cache-loader/dist/cjs.js","mtime":1642166329000},{"path":"/home/warley/Projetos/Web/TCC/Front-End/node_modules/babel-loader/lib/index.js","mtime":1648651409000},{"path":"/home/warley/Projetos/Web/TCC/Front-End/node_modules/cache-loader/dist/cjs.js","mtime":1642166329000},{"path":"/home/warley/Projetos/Web/TCC/Front-End/node_modules/vue-loader/lib/index.js","mtime":1642166077000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGJhc2VBcGlVcmwsIHNob3dFcnJvciB9IGZyb20gJ0AvZ2xvYmFsJzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnVXN1YXJpbycsCiAgZGF0YTogZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHsKICAgICAgbW9kZTogJ3NhdmUnLAogICAgICB1c2VyOiB7fSwKICAgICAgdXNlcnM6IFtdLAogICAgICBuaXZlaXM6IFsKICAgICAgICB7IHZhbHVlOiAxLCB0ZXh0OiAnQWRtaW5pc3RyYWRvcicgfSwKICAgICAgICB7IHZhbHVlOiAyLCB0ZXh0OiAnR2VyZW50ZScgfSwKICAgICAgICB7IHZhbHVlOiAzLCB0ZXh0OiAnQ29vcmRlbmFkb3InIH0sCiAgICAgICAgeyB2YWx1ZTogNCwgdGV4dDogJ0FuYWxpc3RhJyB9LAogICAgICAgIHsgdmFsdWU6IDUsIHRleHQ6ICdVc3XDoXJpbyBQYWRyw6NvJyB9LAogICAgICBdLAogICAgICBmaWVsZHM6IFsKICAgICAgICB7IGtleTogJ3VzdWFyaW9JZCcsIGxhYmVsOiAnIycsIHNvcnRhYmxlOiB0cnVlIH0sCiAgICAgICAgeyBrZXk6ICduYW1lJywgbGFiZWw6ICdOb21lJywgc29ydGFibGU6IHRydWUgfSwKICAgICAgICB7IGtleTogJ2VtYWlsJywgbGFiZWw6ICdFLW1haWwnLCBzb3J0YWJsZTogdHJ1ZSB9LAogICAgICAgIHsga2V5OiAncGxhbnRhJywgbGFiZWw6ICdQbGFudGEgSW5kdXN0cmlhbCcsIHNvcnRhYmxlOiB0cnVlIH0sCiAgICAgICAgewogICAgICAgICAga2V5OiAnbml2ZWwnLAogICAgICAgICAgbGFiZWw6ICdOw612ZWwgdXN1w6FyaW8nLAogICAgICAgICAgc29ydGFibGU6IHRydWUsCiAgICAgICAgICBmb3JtYXR0ZXI6ICh2YWx1ZSkgPT4KICAgICAgICAgICAgdmFsdWUgPT09IDEKICAgICAgICAgICAgICA/ICdBZG1pbmlzdHJhZG9yJwogICAgICAgICAgICAgIDogdmFsdWUgPT09IDIKICAgICAgICAgICAgICA/ICdHZXJlbnRlJwogICAgICAgICAgICAgIDogdmFsdWUgPT09IDMKICAgICAgICAgICAgICA/ICdDb29yZGVuYWRvcicKICAgICAgICAgICAgICA6IHZhbHVlID09PSA0CiAgICAgICAgICAgICAgPyAnQW5hbGlzdGEnCiAgICAgICAgICAgICAgOiAnVXN1w6FyaW8gUGFkcsOjbycsCiAgICAgICAgfSwKICAgICAgICAvLyB7CiAgICAgICAgLy8gICBrZXk6ICdhZG1pbicsCiAgICAgICAgLy8gICBsYWJlbDogJ0FkbWluaXN0cmFkb3InLAogICAgICAgIC8vICAgc29ydGFibGU6IHRydWUsCiAgICAgICAgLy8gICBmb3JtYXR0ZXI6ICh2YWx1ZSkgPT4gKHZhbHVlID8gJ1NpbScgOiAnTsOjbycpLAogICAgICAgIC8vIH0sCiAgICAgICAgeyBrZXk6ICdhY3Rpb25zJywgbGFiZWw6ICdBw6fDtWVzJyB9LAogICAgICBdLAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGxvYWRVc2VycygpIHsKICAgICAgY29uc3QgdXJsID0gYCR7YmFzZUFwaVVybH0vdXN1YXJpb2A7CiAgICAgIGF4aW9zLmdldCh1cmwpLnRoZW4oKHJlcykgPT4gewogICAgICAgIHRoaXMudXNlcnMgPSByZXMuZGF0YTsKICAgICAgfSk7CiAgICB9LAogICAgcmVzZXQoKSB7CiAgICAgIHRoaXMubW9kZSA9ICdzYXZlJzsKICAgICAgdGhpcy51c2VyID0ge307CiAgICAgIHRoaXMubG9hZFVzZXJzKCk7CiAgICB9LAogICAgc2F2ZSgpIHsKICAgICAgY29uc3QgbWV0aG9kID0gdGhpcy51c2VyLnVzdWFyaW9JZCA/ICdwdXQnIDogJ3Bvc3QnOwogICAgICBjb25zdCBpZCA9IHRoaXMudXNlci51c3VhcmlvSWQgPyBgLyR7dGhpcy51c2VyLnVzdWFyaW9JZH1gIDogJyc7CiAgICAgIGRlbGV0ZSB0aGlzLnVzZXIucGxhbnRhOwogICAgICBheGlvc1ttZXRob2RdKGAke2Jhc2VBcGlVcmx9L3VzdWFyaW8ke2lkfWAsIHRoaXMudXNlcikKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLiR0b2FzdGVkLmdsb2JhbC5kZWZhdWx0U3VjY2VzcygpOwogICAgICAgICAgdGhpcy5yZXNldCgpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKHNob3dFcnJvcik7CiAgICB9LAogICAgcmVtb3ZlKCkgewogICAgICBjb25zdCBpZCA9IHRoaXMudXNlci51c3VhcmlvSWQ7CiAgICAgIGF4aW9zCiAgICAgICAgLmRlbGV0ZShgJHtiYXNlQXBpVXJsfS91c3VhcmlvLyR7aWR9YCkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLiR0b2FzdGVkLmdsb2JhbC5kZWZhdWx0U3VjY2VzcygpOwogICAgICAgICAgdGhpcy5yZXNldCgpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKHNob3dFcnJvcik7CiAgICB9LAogICAgbG9hZFVzZXIodXNlciwgbW9kZSA9ICdzYXZlJykgewogICAgICB0aGlzLm1vZGUgPSBtb2RlOwogICAgICB0aGlzLnVzZXIgPSB7IC4uLnVzZXIgfTsKICAgIH0sCiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5sb2FkVXNlcnMoKTsKICB9LAp9Owo="},{"version":3,"sources":["Usuario.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2HA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Usuario.vue","sourceRoot":"src/components/users","sourcesContent":["<template>\n  <div class=\"usuario\">\n    <b-form>\n      <input type=\"hidden\" id=\"user-id\" v-model=\"user.usuarioId\" />\n      <b-row>\n        <b-col md=\"6\" sm=\"12\">\n          <b-form-group label=\"Nome:\" label-for=\"user-name\">\n            <b-form-input\n              id=\"user-name\"\n              type=\"text\"\n              v-model=\"user.name\"\n              required\n              :readonly=\"mode === 'remove'\"\n              placeholder=\"Informe o Nome do Usuário\"\n            />\n          </b-form-group>\n        </b-col>\n        <b-col md=\"6\" sm=\"12\">\n          <b-form-group label=\"E-mail:\" label-for=\"user-email\">\n            <b-form-input\n              id=\"user-email\"\n              type=\"text\"\n              v-model=\"user.email\"\n              required\n              :readonly=\"mode === 'remove'\"\n              placeholder=\"Informe o E-mail do Usuário\"\n            />\n          </b-form-group>\n        </b-col>\n      </b-row>\n      <b-row v-show=\"mode === 'save'\">\n        <b-col md=\"6\" sm=\"12\">\n          <b-form-group label=\"Senha:\" label-for=\"user-password\">\n            <b-form-input\n              id=\"user-password\"\n              type=\"password\"\n              v-model=\"user.password\"\n              required\n              placeholder=\"Informe a Senha do Usuário\"\n            />\n          </b-form-group>\n        </b-col>\n        <b-col md=\"6\" sm=\"12\">\n          <b-form-group\n            label=\"Confirme a senha:\"\n            label-for=\"user-confirm-password\"\n          >\n            <b-form-input\n              id=\"user-confirm-password\"\n              type=\"password\"\n              v-model=\"user.confirmPassword\"\n              required\n              placeholder=\"Confirme a senha do Usuário\"\n            />\n          </b-form-group>\n        </b-col>\n      </b-row>\n      <b-row>\n        <b-col md=\"4\" sm=\"12\">\n          <b-form-group label=\"Nível:\" label-for=\"user-nivel\">\n            <b-form-select\n              v-if=\"mode === 'save'\"\n              id=\"user-nivel\"\n              :options=\"niveis\"\n              v-model=\"user.nivel\"\n            />\n            <b-form-input\n              v-else\n              id=\"user-nivel\"\n              type=\"text\"\n              v-model=\"user.nivel\"\n              readonly\n            />\n          </b-form-group>\n        </b-col>\n        <!-- <b-col class=\"mt-3\" md=\"4\" sm=\"12\">\n          <b-form-group>\n            <b-form-checkbox\n              v-show=\"mode === 'save'\"\n              id=\"user-admin\"\n              v-model=\"user.admin\"\n              class=\"mt-3 mb-3\"\n            >\n              Administrador?\n            </b-form-checkbox>\n          </b-form-group>\n        </b-col> -->\n      </b-row>\n      <b-row>\n        <b-col xs=\"12\">\n          <b-button variant=\"primary\" v-if=\"mode === 'save'\" @click=\"save\">\n            Salvar\n          </b-button>\n          <b-button variant=\"danger\" v-if=\"mode === 'remove'\" @click=\"remove\">\n            Excluir\n          </b-button>\n          <b-button class=\"ml-2\" @click=\"reset\"> Cancelar </b-button>\n        </b-col>\n      </b-row>\n    </b-form>\n    <hr />\n    <b-table\n      hover\n      striped\n      small\n      sort-icon-left\n      head-variant=\"dark\"\n      :items=\"users\"\n      :fields=\"fields\"\n    >\n      <template v-slot:cell(actions)=\"data\">\n        <b-button variant=\"warning\" @click=\"loadUser(data.item)\" class=\"mr-2\">\n          <i class=\"fa fa-pencil\"></i>\n        </b-button>\n        <b-button variant=\"danger\" @click=\"loadUser(data.item, 'remove')\">\n          <i class=\"fa fa-trash\"></i>\n        </b-button>\n      </template>\n    </b-table>\n  </div>\n</template>\n\n<script>\nimport { baseApiUrl, showError } from '@/global';\nimport axios from 'axios';\n\nexport default {\n  name: 'Usuario',\n  data: function () {\n    return {\n      mode: 'save',\n      user: {},\n      users: [],\n      niveis: [\n        { value: 1, text: 'Administrador' },\n        { value: 2, text: 'Gerente' },\n        { value: 3, text: 'Coordenador' },\n        { value: 4, text: 'Analista' },\n        { value: 5, text: 'Usuário Padrão' },\n      ],\n      fields: [\n        { key: 'usuarioId', label: '#', sortable: true },\n        { key: 'name', label: 'Nome', sortable: true },\n        { key: 'email', label: 'E-mail', sortable: true },\n        { key: 'planta', label: 'Planta Industrial', sortable: true },\n        {\n          key: 'nivel',\n          label: 'Nível usuário',\n          sortable: true,\n          formatter: (value) =>\n            value === 1\n              ? 'Administrador'\n              : value === 2\n              ? 'Gerente'\n              : value === 3\n              ? 'Coordenador'\n              : value === 4\n              ? 'Analista'\n              : 'Usuário Padrão',\n        },\n        // {\n        //   key: 'admin',\n        //   label: 'Administrador',\n        //   sortable: true,\n        //   formatter: (value) => (value ? 'Sim' : 'Não'),\n        // },\n        { key: 'actions', label: 'Ações' },\n      ],\n    };\n  },\n  methods: {\n    loadUsers() {\n      const url = `${baseApiUrl}/usuario`;\n      axios.get(url).then((res) => {\n        this.users = res.data;\n      });\n    },\n    reset() {\n      this.mode = 'save';\n      this.user = {};\n      this.loadUsers();\n    },\n    save() {\n      const method = this.user.usuarioId ? 'put' : 'post';\n      const id = this.user.usuarioId ? `/${this.user.usuarioId}` : '';\n      delete this.user.planta;\n      axios[method](`${baseApiUrl}/usuario${id}`, this.user)\n        .then(() => {\n          this.$toasted.global.defaultSuccess();\n          this.reset();\n        })\n        .catch(showError);\n    },\n    remove() {\n      const id = this.user.usuarioId;\n      axios\n        .delete(`${baseApiUrl}/usuario/${id}`)\n        .then(() => {\n          this.$toasted.global.defaultSuccess();\n          this.reset();\n        })\n        .catch(showError);\n    },\n    loadUser(user, mode = 'save') {\n      this.mode = mode;\n      this.user = { ...user };\n    },\n  },\n  mounted() {\n    this.loadUsers();\n  },\n};\n</script>\n\n<style></style>\n"]}]}