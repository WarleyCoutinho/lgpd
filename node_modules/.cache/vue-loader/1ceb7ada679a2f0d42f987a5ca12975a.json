{"remainingRequest":"/home/warley/Área de Trabalho/Projeto de TCC/Front-End/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/warley/Área de Trabalho/Projeto de TCC/Front-End/src/components/users/Usuario.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/warley/Área de Trabalho/Projeto de TCC/Front-End/src/components/users/Usuario.vue","mtime":1651662381667},{"path":"/home/warley/Área de Trabalho/Projeto de TCC/Front-End/node_modules/cache-loader/dist/cjs.js","mtime":1650512209933},{"path":"/home/warley/Área de Trabalho/Projeto de TCC/Front-End/node_modules/babel-loader/lib/index.js","mtime":1651454970914},{"path":"/home/warley/Área de Trabalho/Projeto de TCC/Front-End/node_modules/cache-loader/dist/cjs.js","mtime":1650512209933},{"path":"/home/warley/Área de Trabalho/Projeto de TCC/Front-End/node_modules/vue-loader/lib/index.js","mtime":1650512226403}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGJhc2VBcGlVcmwsIHNob3dFcnJvciB9IGZyb20gJ0AvZ2xvYmFsJzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdVc3VhcmlvJywKICBkYXRhOiBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gewogICAgICBtb2RlOiAnc2F2ZScsCiAgICAgIHVzZXI6IHt9LAogICAgICB1c2VyczogW10sCiAgICAgIG5pdmVpczogWwogICAgICAgIHsgdmFsdWU6IDEsIHRleHQ6ICdBZG1pbmlzdHJhZG9yJyB9LAogICAgICAgIHsgdmFsdWU6IDIsIHRleHQ6ICdHZXJlbnRlJyB9LAogICAgICAgIHsgdmFsdWU6IDMsIHRleHQ6ICdDb29yZGVuYWRvcicgfSwKICAgICAgICB7IHZhbHVlOiA0LCB0ZXh0OiAnQW5hbGlzdGEnIH0sCiAgICAgICAgeyB2YWx1ZTogNSwgdGV4dDogJ1VzdcOhcmlvIFBhZHLDo28nIH0sCiAgICAgIF0sCiAgICAgIGZpZWxkczogWwogICAgICAgIHsga2V5OiAndXN1YXJpb0lkJywgbGFiZWw6ICcjJywgc29ydGFibGU6IHRydWUgfSwKICAgICAgICB7IGtleTogJ25hbWUnLCBsYWJlbDogJ05vbWUnLCBzb3J0YWJsZTogdHJ1ZSB9LAogICAgICAgIHsga2V5OiAnZW1haWwnLCBsYWJlbDogJ0UtbWFpbCcsIHNvcnRhYmxlOiB0cnVlIH0sCiAgICAgICAgeyBrZXk6ICdwbGFudGEnLCBsYWJlbDogJ1BsYW50YSBJbmR1c3RyaWFsJywgc29ydGFibGU6IHRydWUgfSwKICAgICAgICB7CiAgICAgICAgICBrZXk6ICduaXZlbCcsCiAgICAgICAgICBsYWJlbDogJ07DrXZlbCB1c3XDoXJpbycsCiAgICAgICAgICBzb3J0YWJsZTogdHJ1ZSwKICAgICAgICAgIGZvcm1hdHRlcjogKHZhbHVlKSA9PgogICAgICAgICAgICB2YWx1ZSA9PT0gMQogICAgICAgICAgICAgID8gJ0FkbWluaXN0cmFkb3InCiAgICAgICAgICAgICAgOiB2YWx1ZSA9PT0gMgogICAgICAgICAgICAgID8gJ0dlcmVudGUnCiAgICAgICAgICAgICAgOiB2YWx1ZSA9PT0gMwogICAgICAgICAgICAgID8gJ0Nvb3JkZW5hZG9yJwogICAgICAgICAgICAgIDogdmFsdWUgPT09IDQKICAgICAgICAgICAgICA/ICdBbmFsaXN0YScKICAgICAgICAgICAgICA6ICdVc3XDoXJpbyBQYWRyw6NvJywKICAgICAgICB9LAogICAgICAgIC8vIHsKICAgICAgICAvLyAgIGtleTogJ2FkbWluJywKICAgICAgICAvLyAgIGxhYmVsOiAnQWRtaW5pc3RyYWRvcicsCiAgICAgICAgLy8gICBzb3J0YWJsZTogdHJ1ZSwKICAgICAgICAvLyAgIGZvcm1hdHRlcjogKHZhbHVlKSA9PiAodmFsdWUgPyAnU2ltJyA6ICdOw6NvJyksCiAgICAgICAgLy8gfSwKICAgICAgICB7IGtleTogJ2FjdGlvbnMnLCBsYWJlbDogJ0HDp8O1ZXMnIH0sCiAgICAgIF0sCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgbG9hZFVzZXJzKCkgewogICAgICBjb25zdCB1cmwgPSBgJHtiYXNlQXBpVXJsfS91c3VhcmlvYDsKICAgICAgYXhpb3MuZ2V0KHVybCkudGhlbigocmVzKSA9PiB7CiAgICAgICAgdGhpcy51c2VycyA9IHJlcy5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICByZXNldCgpIHsKICAgICAgdGhpcy5tb2RlID0gJ3NhdmUnOwogICAgICB0aGlzLnVzZXIgPSB7fTsKICAgICAgdGhpcy5sb2FkVXNlcnMoKTsKICAgIH0sCiAgICBzYXZlKCkgewogICAgICBjb25zdCBtZXRob2QgPSB0aGlzLnVzZXIudXN1YXJpb0lkID8gJ3B1dCcgOiAncG9zdCc7CiAgICAgIGNvbnN0IGlkID0gdGhpcy51c2VyLnVzdWFyaW9JZCA/IGAvJHt0aGlzLnVzZXIudXN1YXJpb0lkfWAgOiAnJzsKICAgICAgZGVsZXRlIHRoaXMudXNlci5wbGFudGE7CiAgICAgIGF4aW9zW21ldGhvZF0oYCR7YmFzZUFwaVVybH0vdXN1YXJpbyR7aWR9YCwgdGhpcy51c2VyKQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIHRoaXMuJHRvYXN0ZWQuZ2xvYmFsLmRlZmF1bHRTdWNjZXNzKCk7CiAgICAgICAgICB0aGlzLnJlc2V0KCk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goc2hvd0Vycm9yKTsKICAgIH0sCiAgICByZW1vdmUoKSB7CiAgICAgIGNvbnN0IGlkID0gdGhpcy51c2VyLnVzdWFyaW9JZDsKICAgICAgYXhpb3MKICAgICAgICAuZGVsZXRlKGAke2Jhc2VBcGlVcmx9L3VzdWFyaW8vJHtpZH1gKQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIHRoaXMuJHRvYXN0ZWQuZ2xvYmFsLmRlZmF1bHRTdWNjZXNzKCk7CiAgICAgICAgICB0aGlzLnJlc2V0KCk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goc2hvd0Vycm9yKTsKICAgIH0sCiAgICBsb2FkVXNlcih1c2VyLCBtb2RlID0gJ3NhdmUnKSB7CiAgICAgIHRoaXMubW9kZSA9IG1vZGU7CiAgICAgIHRoaXMudXNlciA9IHsgLi4udXNlciB9OwogICAgfSwKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmxvYWRVc2VycygpOwogIH0sCn07Cg=="},{"version":3,"sources":["Usuario.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Usuario.vue","sourceRoot":"src/components/users","sourcesContent":["<template>\n  <div class=\"usuario\">\n    <b-form>\n      <input type=\"hidden\" id=\"user-id\" v-model=\"user.usuarioId\" />\n      <b-row>\n        <b-col md=\"6\" sm=\"12\">\n          <b-form-group label=\"Nome:\" label-for=\"user-name\">\n            <b-form-input\n              id=\"user-name\"\n              type=\"text\"\n              v-model=\"user.name\"\n              required\n              :readonly=\"mode === 'remove'\"\n              placeholder=\"Informe o Nome do Usuário\"\n            />\n          </b-form-group>\n        </b-col>\n        <b-col md=\"6\" sm=\"12\">\n          <b-form-group label=\"E-mail:\" label-for=\"user-email\">\n            <b-form-input\n              id=\"user-email\"\n              type=\"text\"\n              v-model=\"user.email\"\n              required\n              :readonly=\"mode === 'remove'\"\n              placeholder=\"Informe o E-mail do Usuário\"\n            />\n          </b-form-group>\n        </b-col>\n      </b-row>\n      <b-row v-show=\"mode === 'save'\">\n        <b-col md=\"6\" sm=\"12\">\n          <b-form-group label=\"Senha:\" label-for=\"user-password\">\n            <b-form-input\n              id=\"user-password\"\n              type=\"password\"\n              v-model=\"user.password\"\n              required\n              placeholder=\"Informe a Senha do Usuário\"\n            />\n          </b-form-group>\n        </b-col>\n        <b-col md=\"6\" sm=\"12\">\n          <b-form-group\n            label=\"Confirme a senha:\"\n            label-for=\"user-confirm-password\"\n          >\n            <b-form-input\n              id=\"user-confirm-password\"\n              type=\"password\"\n              v-model=\"user.confirmPassword\"\n              required\n              placeholder=\"Confirme a senha do Usuário\"\n            />\n          </b-form-group>\n        </b-col>\n      </b-row>\n      <b-row>\n        <b-col md=\"4\" sm=\"12\">\n          <b-form-group label=\"Nível:\" label-for=\"user-nivel\">\n            <b-form-select\n              v-if=\"mode === 'save'\"\n              id=\"user-nivel\"\n              :options=\"niveis\"\n              v-model=\"user.nivel\"\n            />\n            <b-form-input\n              v-else\n              id=\"user-nivel\"\n              type=\"text\"\n              v-model=\"user.nivel\"\n              readonly\n            />\n          </b-form-group>\n        </b-col>\n        <!-- <b-col class=\"mt-3\" md=\"4\" sm=\"12\">\n          <b-form-group>\n            <b-form-checkbox\n              v-show=\"mode === 'save'\"\n              id=\"user-admin\"\n              v-model=\"user.admin\"\n              class=\"mt-3 mb-3\"\n            >\n              Administrador?\n            </b-form-checkbox>\n          </b-form-group>\n        </b-col> -->\n      </b-row>\n      <b-row>\n        <b-col xs=\"12\">\n          <b-button variant=\"primary\" v-if=\"mode === 'save'\" @click=\"save\">\n            Salvar\n          </b-button>\n          <b-button variant=\"danger\" v-if=\"mode === 'remove'\" @click=\"remove\">\n            Excluir\n          </b-button>\n          <b-button class=\"ml-2\" @click=\"reset\"> Cancelar </b-button>\n        </b-col>\n      </b-row>\n    </b-form>\n    <hr />\n    <b-table\n      hover\n      striped\n      small\n      sort-icon-left\n      head-variant=\"dark\"\n      :items=\"users\"\n      :fields=\"fields\"\n    >\n      <template v-slot:cell(actions)=\"data\">\n        <b-button variant=\"warning\" @click=\"loadUser(data.item)\" class=\"mr-2\">\n          <i class=\"fa fa-pencil\"></i>\n        </b-button>\n        <b-button variant=\"danger\" @click=\"loadUser(data.item, 'remove')\">\n          <i class=\"fa fa-trash\"></i>\n        </b-button>\n      </template>\n    </b-table>\n  </div>\n</template>\n\n<script>\nimport { baseApiUrl, showError } from '@/global';\nimport axios from 'axios';\nexport default {\n  name: 'Usuario',\n  data: function () {\n    return {\n      mode: 'save',\n      user: {},\n      users: [],\n      niveis: [\n        { value: 1, text: 'Administrador' },\n        { value: 2, text: 'Gerente' },\n        { value: 3, text: 'Coordenador' },\n        { value: 4, text: 'Analista' },\n        { value: 5, text: 'Usuário Padrão' },\n      ],\n      fields: [\n        { key: 'usuarioId', label: '#', sortable: true },\n        { key: 'name', label: 'Nome', sortable: true },\n        { key: 'email', label: 'E-mail', sortable: true },\n        { key: 'planta', label: 'Planta Industrial', sortable: true },\n        {\n          key: 'nivel',\n          label: 'Nível usuário',\n          sortable: true,\n          formatter: (value) =>\n            value === 1\n              ? 'Administrador'\n              : value === 2\n              ? 'Gerente'\n              : value === 3\n              ? 'Coordenador'\n              : value === 4\n              ? 'Analista'\n              : 'Usuário Padrão',\n        },\n        // {\n        //   key: 'admin',\n        //   label: 'Administrador',\n        //   sortable: true,\n        //   formatter: (value) => (value ? 'Sim' : 'Não'),\n        // },\n        { key: 'actions', label: 'Ações' },\n      ],\n    };\n  },\n  methods: {\n    loadUsers() {\n      const url = `${baseApiUrl}/usuario`;\n      axios.get(url).then((res) => {\n        this.users = res.data;\n      });\n    },\n    reset() {\n      this.mode = 'save';\n      this.user = {};\n      this.loadUsers();\n    },\n    save() {\n      const method = this.user.usuarioId ? 'put' : 'post';\n      const id = this.user.usuarioId ? `/${this.user.usuarioId}` : '';\n      delete this.user.planta;\n      axios[method](`${baseApiUrl}/usuario${id}`, this.user)\n        .then(() => {\n          this.$toasted.global.defaultSuccess();\n          this.reset();\n        })\n        .catch(showError);\n    },\n    remove() {\n      const id = this.user.usuarioId;\n      axios\n        .delete(`${baseApiUrl}/usuario/${id}`)\n        .then(() => {\n          this.$toasted.global.defaultSuccess();\n          this.reset();\n        })\n        .catch(showError);\n    },\n    loadUser(user, mode = 'save') {\n      this.mode = mode;\n      this.user = { ...user };\n    },\n  },\n  mounted() {\n    this.loadUsers();\n  },\n};\n</script>\n\n<style></style>\n"]}]}